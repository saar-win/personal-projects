FROM python:3.9.5-buster
# set the workdir
WORKDIR /app
# copy files
COPY . .
## install the req
RUN pip install -r requirements.txt
# defines flask deps
ARG FLASK_APP
ARG FLASK_PORT
# AUTH DEPS
ARG GOOGLE_PASS
ARG GOOGLE_AUTH
ARG GOOGLE_USER
# RELE DEPS
ARG RELE_PAYMENTS
ARG RELE_LOGGING
ARG SAAR_CHANNEL
#
ENV FLASK_RUN_PORT=${FLASK_PORT}
ENV FLASK_APP=${FLASK_APP}
# AUTH ENV
ENV GOOGLE_PASS=${GOOGLE_PASS}
ENV GOOGLE_AUTH=${GOOGLE_AUTH}
ENV GOOGLE_USER=${GOOGLE_USER}
# RELE ENV
ENV RELE_PAYMENTS=${RELE_PAYMENTS}
ENV RELE_LOGGING=${RELE_LOGGING}
ENV SAAR_CHANNEL=${SAAR_CHANNEL}
# run the server
CMD ["flask", "run", "--host=0.0.0.0"]